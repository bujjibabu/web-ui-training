<!doctype html>
<html>
	<head>
		<title>Dynamic-form</title>
		<link rel="stylesheet" type="text/css" href="../css/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="css/dynamic-form.css">

	</head>
	<body>
		<div class="container">
			<div class="col-xs-12 col-sm-12 mn-div1">
				<h2>Task Tracker</h2>
				<p>v2.0</p>
			</div>
			
			<div class="col-xs-6 col-sm-6 mn-div2">
				<h3>Create a Task</h3>
				<div>
					<div class="form-group">
						<label>Task Name</label>
						<input type="text" class="form-control task-name">
					</div>
					<div class="form-group">
						<label>Date</label>
						<input type="text" class="form-control date">
					</div>
					<div class="form-group">
						<label>Assigned To</label>
						<input type="text" class="form-control assign">
					</div>
					<button class="btn btn-danger mn-button">Submit</button>
				</div>
			</div>

			<div class="col-xs-6 col-sm-6 mn-div3">
				<h3>Existing Tasks</h3>
				<div id="mn-table"></div>
			</div>
		</div>
		<script type="text/javascript" src="../js/jquery-2.1.4.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
				//declaring and initializing the json array
				var arrjson = [{name:"Test Task#1", date:"12/01/2012", assigned:"John Doe"},
							   {name:"Test Task#2", date:"12/02/2012", assigned:"John Doe"},
							   {name:"Test Task#3", date:"12/03/2012", assigned:"John Doe"},
							   {name:"Test Task#4", date:"12/04/2012", assigned:"John Doe"},
							   {name:"Test Task#5", date:"12/05/2012", assigned:"John Doe"},
							   {name:"Test Task#6", date:"12/06/2012", assigned:"John Doe"},
							   {name:"Test Task#7", date:"12/07/2012", assigned:"John Doe"}];

				function tableCreation(){
					var arrlength = arrjson.length;
					var tabledata = "";

					tabledata = '<table class="table table-striped table-responsive">';
					//Iterating through tr and setting jsondata into td elements within tr 
					for(i=0; i < arrlength; i++){

						tabledata += "<tr>";
						tabledata += "<td><b>" + arrjson[i].name +"</b>&nbsp;<span>" + arrjson[i].date + "</span></td>";

						tabledata += "<td>" + arrjson[i].assigned + "</td>";
						tabledata += "</tr>";

					}
					tabledata += "</table>";

					//setting the tabledata into the table element of HTMl using innerHTML
					document.getElementById("mn-table").innerHTML = tabledata;
				}

				

				
				$('.mn-button').click(function(){
					var myobj ={};
					myobj.name = $('.task-name').val();
					myobj.date = $('.date').val();
					myobj.assigned = $('.assign').val();
					//pushing the object(myobj) into the jsondata array (arrjson)
					arrjson.unshift(myobj);
					tableCreation();
					$('.task-name').val('');
					$('.date').val('');
					$('.assign').val('');
				});

	tableCreation(); //calling the function tableCreation
			});
		</script>
	</body>
</html>